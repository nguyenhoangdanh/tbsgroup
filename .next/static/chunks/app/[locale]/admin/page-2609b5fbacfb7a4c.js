(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{2559:function(e,t,a){Promise.resolve().then(a.bind(a,6201))},6201:function(e,t,a){"use strict";a.d(t,{AdminDashboard:function(){return o}});var s=a(7437),r=a(605),i=a(2586),n=a(2265);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vi";return new Intl.DateTimeFormat(t,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}var c=a(3287);function d(e){let{locale:t}=e,a=(0,i.useTranslations)("admin.dashboard"),[r,d]=(0,n.useState)([]),[x,o]=(0,n.useState)(!0),[m,h]=(0,n.useState)(""),[g,u]=(0,n.useState)(1),[p,y]=(0,n.useState)(1);(0,n.useEffect)(()=>{b()},[g]);let b=async()=>{try{o(!0);let e=await fetch("/api/admin/inquiries?page=".concat(g,"&pageSize=20"));if(!e.ok)throw Error("Failed to fetch inquiries");let t=await e.json();d(t.data),y(t.totalPages)}catch(e){h(e instanceof Error?e.message:"An error occurred")}finally{o(!1)}},j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length>t?e.slice(0,t)+"...":e};return x?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-accent"})}):m?(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}):0===r.length?(0,s.jsx)("div",{className:"text-center py-12 text-gray-500",children:a("noData")}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("table.email")}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("table.content")}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("table.images")}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("table.createdAt")})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:r.map(e=>(0,s.jsxs)(c.E.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.email}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,s.jsx)("div",{className:"max-w-xs",children:j(e.content)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.imageUrls.length>0?(0,s.jsxs)("div",{className:"flex space-x-1",children:[e.imageUrls.slice(0,3).map((e,t)=>(0,s.jsx)("img",{src:e,alt:"Image ".concat(t+1),className:"w-8 h-8 object-cover rounded border"},t)),e.imageUrls.length>3&&(0,s.jsxs)("div",{className:"w-8 h-8 bg-gray-100 rounded border flex items-center justify-center text-xs text-gray-500",children:["+",e.imageUrls.length-3]})]}):(0,s.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(new Date(e.createdAt),t)})]},e.id))})]})}),(0,s.jsx)("div",{className:"md:hidden space-y-4",children:r.map(e=>(0,s.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("table.email")}),(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("table.content")}),(0,s.jsx)("div",{className:"text-sm text-gray-900",children:j(e.content,150)})]}),e.imageUrls.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("table.images")}),(0,s.jsxs)("div",{className:"flex space-x-1 mt-1",children:[e.imageUrls.slice(0,4).map((e,t)=>(0,s.jsx)("img",{src:e,alt:"Image ".concat(t+1),className:"w-12 h-12 object-cover rounded border"},t)),e.imageUrls.length>4&&(0,s.jsxs)("div",{className:"w-12 h-12 bg-gray-100 rounded border flex items-center justify-center text-xs text-gray-500",children:["+",e.imageUrls.length-4]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("table.createdAt")}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:l(new Date(e.createdAt),t)})]})]})},e.id))}),p>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>u(e=>Math.max(1,e-1)),disabled:1===g,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",g," of ",p]}),(0,s.jsx)("button",{onClick:()=>u(e=>Math.min(p,e+1)),disabled:g===p,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}var x=a(3051);function o(e){let{locale:t}=e,a=(0,i.useTranslations)("admin.dashboard");return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 lg:pt-24",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto container-padding",children:(0,s.jsxs)(x.MotionFadeIn,{children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-serif text-2xl lg:text-3xl font-bold text-brand-primary",children:a("title")}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage customer consultation requests"})]}),(0,s.jsx)("button",{onClick:()=>{(0,r.signOut)({callbackUrl:"/".concat(t)})},className:"btn-secondary",children:a("logout")})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsx)(d,{locale:t})})]})})})}},3051:function(e,t,a){"use strict";a.d(t,{MotionFadeIn:function(){return i}});var s=a(7437),r=a(3287);function i(e){let{children:t,delay:a=0,duration:i=.6,className:n=""}=e;return(0,s.jsx)(r.E.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:i,delay:a,ease:[.4,0,.2,1]},viewport:{once:!0,margin:"-100px"},className:n,children:t})}}},function(e){e.O(0,[118,605,971,117,744],function(){return e(e.s=2559)}),_N_E=e.O()}]);